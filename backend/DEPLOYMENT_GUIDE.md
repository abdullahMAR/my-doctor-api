# ุฏููู ูุดุฑ MyDoctor ุนูู Render ูุน PostgreSQL ๐

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ุณูุณุงุนุฏู ุนูู ูุดุฑ ุชุทุจูู MyDoctor Backend ุนูู Render ุจุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL ุงููุฌุงููุฉ.

---

## ๐ฏ ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL ุนูู Render

### 1.1 ุฅูุดุงุก ุงููุงุนุฏุฉ

1. ุงุฐูุจ ุฅูู [Render.com](https://render.com) ูุณุฌูู ุฏุฎูู (ุฃู ุฃูุดุฆ ุญุณุงุจ ุฌุฏูุฏ ูุฌุงูู)
2. ูู ููุญุฉ ุงูุชุญููุ ุงุถุบุท ุนูู **"New +"** โ **"PostgreSQL"**
3. ุงููุฃ ุงูุจูุงูุงุช ุงูุชุงููุฉ:
   
   | ุงูุญูู | ุงููููุฉ ุงูููุชุฑุญุฉ |
   |-------|-----------------|
   | **Name** | `my-doctor-db` |
   | **Database** | `mydoctor` (ุณูุชู ุฅูุดุงุคู ุชููุงุฆูุงู) |
   | **User** | ุณูุชู ุฅูุดุงุคู ุชููุงุฆูุงู |
   | **Region** | Frankfurt (EU Central) ุฃู ุฃูุฑุจ ููุทูุฉ ูู |
   | **PostgreSQL Version** | 16 (ุฃุญุฏุซ ุฅุตุฏุงุฑ) |
   | **Plan** | โญ **Free** (ูุฌุงูู!) |

4. ุงุถุบุท **"Create Database"**
5. ุงูุชุธุฑ 1-2 ุฏูููุฉ ุญุชู ูุชู ุฅูุดุงุก ุงููุงุนุฏุฉ

### 1.2 ุงูุญุตูู ุนูู ูุนูููุงุช ุงูุงุชุตุงู

ุจุนุฏ ุฅูุดุงุก ุงููุงุนุฏุฉุ ุณุชุธูุฑ ุตูุญุฉ ุจูุง ูุนูููุงุช ุงูุงุชุตุงู:

- **Internal Database URL**: ููุงุณุชุฎุฏุงู ูู ุฎุฏูุงุช Render ุงูุฃุฎุฑู (ูุซู Backend ุงูุฎุงุต ุจู)
- **External Database URL**: ููุงุชุตุงู ูู ุฌูุงุฒู ุงููุญูู ุฃู ุฃุฏูุงุช ุฅุฏุงุฑุฉ ููุงุนุฏ ุงูุจูุงูุงุช

> **๐ ููุงุญุธุฉ ูููุฉ**: ุงุญูุธ **External Database URL** ูู ููุงู ุขููุ ุณุชุญุชุงุฌู ูุงุญูุงู!

ุงูุฑุงุจุท ุณูููู ุจูุฐุง ุงูุดูู:
```
postgres://username:password@dpg-xxxxx.frankfurt-postgres.render.com/mydoctor
```

---

## ๐ฅ๏ธ ุงูุฎุทูุฉ 2: ุฑูุน ุงูููุฏ ุฅูู GitHub

### 2.1 ุฅูุดุงุก ูุณุชูุฏุน GitHub ุฌุฏูุฏ

1. ุงุฐูุจ ุฅูู [GitHub.com](https://github.com)
2. ุงุถุบุท ุนูู **"New repository"**
3. ุฃุฏุฎู ุงุณู ุงููุณุชูุฏุน: `my-doctor-backend`
4. ุงุฌุนูู **Public** ุฃู **Private** (ุญุณุจ ุฑุบุจุชู)
5. **ูุง ุชุถุน** ุนูุงูุฉ ุนูู "Initialize with README"
6. ุงุถุบุท **"Create repository"**

### 2.2 ุฑูุน ุงูููุฏ

ุงูุชุญ Terminal ูู ูุฌูุฏ backend:

```bash
cd c:\Users\ABDULLAH\Desktop\MyDoctor\my_doctor\backend

# ุฅูุดุงุก ูุณุชูุฏุน Git ูุญูู
git init

# ุฅูุดุงุก ููู .gitignore
echo "__pycache__/" > .gitignore
echo "*.db" >> .gitignore
echo ".env" >> .gitignore
echo "*.pyc" >> .gitignore

# ุฅุถุงูุฉ ุฌููุน ุงููููุงุช
git add .

# ุฅูุดุงุก ุฃูู commit
git commit -m "Initial commit: MyDoctor Backend"

# ุฑุจุท ุงููุณุชูุฏุน ุงููุญูู ุจู GitHub (ุงุณุชุจุฏู YOUR_USERNAME ุจุงุณู ุงููุณุชุฎุฏู ุงูุฎุงุต ุจู)
git branch -M main
git remote add origin https://github.com/YOUR_USERNAME/my-doctor-backend.git
git push -u origin main
```

---

## ๐ ุงูุฎุทูุฉ 3: ูุดุฑ Backend ุนูู Render

### 3.1 ุฅูุดุงุก Web Service

1. ูู ููุญุฉ ุชุญูู Renderุ ุงุถุบุท **"New +"** โ **"Web Service"**
2. ุงุฎุชุฑ **"Connect a repository"** ูุงุฑุจุท ุญุณุงุจ GitHub ุงูุฎุงุต ุจู
3. ุงุฎุชุฑ ูุณุชูุฏุน `my-doctor-backend`
4. ุงููุฃ ุงูุจูุงูุงุช:

   | ุงูุญูู | ุงููููุฉ |
   |-------|--------|
   | **Name** | `my-doctor-api` |
   | **Region** | ููุณ ุงูููุทูุฉ ุงูุชู ุงุฎุชุฑุชูุง ูููุงุนุฏุฉ |
   | **Branch** | `main` |
   | **Root Directory** | (ุงุชุฑูู ูุงุฑุบุงู) |
   | **Runtime** | `Python 3` |
   | **Build Command** | `pip install -r requirements.txt` |
   | **Start Command** | `uvicorn main:app --host 0.0.0.0 --port $PORT` |
   | **Plan** | โญ **Free** |

### 3.2 ุฅุถุงูุฉ ูุชุบูุฑ ุงูุจูุฆุฉ (Environment Variable)

**ูุฐู ุงูุฎุทูุฉ ูููุฉ ุฌุฏุงู!** ๐ฅ

1. ูุจู ุงูุถุบุท ุนูู "Create Web Service"ุ ุงูุฒู ุฅูู ูุณู **"Environment Variables"**
2. ุงุถุบุท **"Add Environment Variable"**
3. ุฃุถู:
   - **Key**: `DATABASE_URL`
   - **Value**: ุงูุตู **Internal Database URL** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุชู ุฃูุดุฃุชูุง ูู ุงูุฎุทูุฉ 1

   > **๐ก ูุตูุญุฉ**: ุงุณุชุฎุฏู **Internal Database URL** ูููุณ External! ูุฃูู ุฃุณุฑุน ูุฃูุซุฑ ุฃูุงูุงู.

4. ุงูุขู ุงุถุบุท **"Create Web Service"**

### 3.3 ุงูุชุธุงุฑ ุงููุดุฑ

- ุณูุจุฏุฃ Render ุจุจูุงุก ููุดุฑ ุงูุชุทุจูู
- ููููู ูุชุงุจุนุฉ ุงูุณุฌูุงุช (Logs) ูุจุงุดุฑุฉู
- ุนูุฏ ุงููุฌุงุญุ ุณุชุญุตู ุนูู ุฑุงุจุท ูุซู: `https://my-doctor-api.onrender.com`

---

## โ ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุงููุดุฑ

### 4.1 ุงุฎุชุจุงุฑ API

ุงูุชุญ ุงููุชุตูุญ ูุงุฐูุจ ุฅูู:
```
https://my-doctor-api.onrender.com/docs
```

ุณุชุธูุฑ ูู ูุงุฌูุฉ Swagger UI ูุน ุฌููุน ุงูู endpoints.

### 4.2 ุฅูุดุงุก ุงูุจูุงูุงุช ุงูุฃูููุฉ (Seeding)

ูุชุดุบูู seed script ูุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ:

**ุงูุทุฑููุฉ 1: ุนุจุฑ Terminal ูุญูู**

```bash
# ูู ุจุชุนููู DATABASE_URL ุฅูู External Database URL
set DATABASE_URL=postgres://username:password@dpg-xxxxx.frankfurt-postgres.render.com/mydoctor

# ูู ุจุชุดุบูู seed script
python seed.py
```

**ุงูุทุฑููุฉ 2: ุนุจุฑ Render Shell** (ูุณุชุญุณู)

1. ุงุฐูุจ ุฅูู ุตูุญุฉ Web Service ุงูุฎุงุต ุจู ุนูู Render
2. ุงุถุบุท ุนูู ุชุจููุจ **"Shell"**
3. ูู ุจุชุดุบูู:
```bash
python seed.py
```

---

## ๐ง ุงูุฎุทูุฉ 5: ุฑุจุท ุงูุชุทุจูู (Flutter App)

ุงูุขู ุจุนุฏ ูุดุฑ ุงูู APIุ ูู ุจุชุญุฏูุซ ุฑุงุจุท ุงูู API ูู ุชุทุจูู Flutter:

ูู ููู `patient_app/lib/services/api_service.dart` (ุฃู ุฃู ููุงู ุชุญูุธ ููู ุงูู baseURL):

```dart
class ApiService {
  // ุงุณุชุจุฏู ูุฐุง ุจุงูุฑุงุจุท ุงูุฌุฏูุฏ ูู Render
  static const String baseURL = 'https://my-doctor-api.onrender.com';
  
  // ุจุงูู ุงูููุฏ...
}
```

---

## ๐ ูุนูููุงุช ูููุฉ ุนู ุงูุฎุทุฉ ุงููุฌุงููุฉ

### โ ููุฒุงุช ุงูุฎุทุฉ ุงููุฌุงููุฉ:

- **PostgreSQL Database**:
  - ุณุนุฉ ุชุฎุฒูู: 1 GB
  - ุตุงูุญ ููุฏุฉ: 90 ููู (ูุชู ุญุฐููุง ุจุนุฏูุง ูุง ูู ุชูู ุจุงูุชุฑููุฉ)
  - ุงุชุตุงูุงุช ูุชุฒุงููุฉ: 10

- **Web Service**:
  - ูุฏุฎู ูู ูุถุน Sleep ุจุนุฏ 15 ุฏูููุฉ ูู ุนุฏู ุงููุดุงุท
  - ุฃูู ุทูุจ ุจุนุฏ Sleep ูุฏ ูุณุชุบุฑู 30-60 ุซุงููุฉ
  - 750 ุณุงุนุฉ ุนูู ุดูุฑูุงู (ูุงููุฉ ููุชุทููุฑ ูุงูุงุฎุชุจุงุฑ)

### โ๏ธ ููุงุท ุงูุชุจุงู:

1. **Sleep Mode**: ุฅุฐุง ุฃุฑุฏุช ุชุฌูุจ ุงู sleepุ ููููู:
   - ุงูุชุฑููุฉ ุฅูู ุฎุทุฉ ูุฏููุนุฉ ($7/ุดูุฑ)
   - ุงุณุชุฎุฏุงู ุฎุฏูุฉ Cron Job ูุฅุฑุณุงู ุทูุจุงุช ูู 10 ุฏูุงุฆู

2. **ุญุฐู ุงููุงุนุฏุฉ ุจุนุฏ 90 ููู**: ุฅุฐุง ููุช ุชุฎุทุท ูุงุณุชุฎุฏุงู ุงููุดุฑูุน ุทููู ุงููุฏู:
   - ุงุญูุธ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุงูุจูุงูุงุช ุจุงูุชุธุงู
   - ุฃู ูู ุจุงูุชุฑููุฉ ุฅูู ุฎุทุฉ ูุฏููุนุฉ (ุจุฏุกุงู ูู $7/ุดูุฑ)

---

## ๐๏ธ ุงูุชุทููุฑ ุงููุญูู

ุงูููุฏ ุงูุขู ูุฏุนู ููุง ุงูุจูุฆุชูู ุชููุงุฆูุงู:

### ููุชุทููุฑ ุงููุญูู (SQLite):
```bash
# ููุท ูู ุจุชุดุบูู ุงูุณูุฑูุฑ ุจุฏูู ุชุนููู DATABASE_URL
uvicorn main:app --reload
```

### ููุงุชุตุงู ุจูุงุนุฏุฉ Render ูุญููุงู (PostgreSQL):
```bash
# ูู ุจุชุนููู DATABASE_URL
set DATABASE_URL=postgres://username:password@dpg-xxxxx.frankfurt-postgres.render.com/mydoctor

# ุซู ูู ุจุชุดุบูู ุงูุณูุฑูุฑ
uvicorn main:app --reload
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: "No module named 'psycopg2'"

**ุงูุญู**: ุชุฃูุฏ ูู ุชุซุจูุช ุงูุชุจุนูุงุช:
```bash
pip install -r requirements.txt
```

### ุงููุดููุฉ: "connection to server failed"

**ุงูุญู**: ุชุญูู ูู:
1. ุตุญุฉ DATABASE_URL
2. ุฃู ุงููุงุนุฏุฉ ุนูู Render ูุดุทุฉ (Active)
3. ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช

### ุงููุดููุฉ: Service ูุฏุฎู ูู Sleep

**ุงูุญู ุงููุคูุช**: 
- ุฃุฑุณู ุฃู ุทูุจ ููู API ูู 10-14 ุฏูููุฉ

**ุงูุญู ุงูุฏุงุฆู**:
- ุงูุชุฑููุฉ ุฅูู Starter Plan ($7/ุดูุฑ)

---

## ๐ฑ ุงูุฎุทูุงุช ุงูุชุงููุฉ

- [ ] ูุดุฑ Admin Panel (ุฅุฐุง ูุงู ูููุน HTML)
- [ ] ุฅุนุฏุงุฏ ูุทุงู ูุฎุตุต (Domain)
- [ ] ุฅุถุงูุฉ HTTPS Certificate (Render ูููุฑูุง ูุฌุงูุงู!)
- [ ] ุฅุนุฏุงุฏ Monitoring ููุณูุฑูุฑ
- [ ] ุฅูุดุงุก ูุธุงู Backup ุชููุงุฆู ููุจูุงูุงุช

---

## ๐ ุชูุงูููุง!

ุงูุขู ูุฏูู:
โ ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL ูุฌุงููุฉ ุนูู Render  
โ Backend API ููุดูุฑ ููุนูู 24/7  
โ ูุธุงู ูุฏุนู ููุงู ูู ุงูุชุทููุฑ ุงููุญูู ูุงูุฅูุชุงุฌ  
โ ููุฏ ุฌุงูุฒ ููุชูุณุน ูุงูุชุทููุฑ  

---

**ุฃู ุณุคุงูุ ุฃูุง ููุง ูููุณุงุนุฏุฉ! ๐**
